function Task(e,t,s){this.id=e,this.description=t,this.completed=s}let tasks=[];function addTask(e){let t=Date.now(),s=new Task(t,e,!1);tasks.push(s),saveTasks(),renderTasks();let a=document.getElementById(`task-${t}`);animateTask(a,"add")}function toggleCompletion(e){let t=tasks.findIndex(t=>t.id===e);-1!==t&&(tasks[t].completed=!tasks[t].completed,saveTasks(),renderTasks())}function moveTaskUp(e){let t=tasks.findIndex(t=>t.id===e);if(t>0){let s=document.getElementById(`task-${e}`),a=document.getElementById(`task-${tasks[t-1].id}`);animateTask(s,"up"),animateTask(a,"down"),setTimeout(()=>{let[e]=tasks.splice(t,1);tasks.splice(t-1,0,e),saveTasks(),updateTaskList()},300)}}function moveTaskDown(e){let t=tasks.findIndex(t=>t.id===e);if(t<tasks.length-1){let s=document.getElementById(`task-${e}`),a=document.getElementById(`task-${tasks[t+1].id}`);animateTask(s,"down"),animateTask(a,"up"),setTimeout(()=>{let[e]=tasks.splice(t,1);tasks.splice(t+1,0,e),saveTasks(),updateTaskList()},300)}}function editTask(e){let t=document.getElementById(`task-${e}`),s=t.querySelector("p"),a=t.querySelector(".edit-input");s.style.display="none",a.style.display="inline-block",a.focus()}function deleteTask(e){let t=document.getElementById(`task-${e}`);animateTask(t,"delete"),setTimeout(()=>{tasks=tasks.filter(t=>t.id!==e),saveTasks(),updateTaskList()},300)}function saveTasks(){localStorage.setItem("tasks",JSON.stringify(tasks))}function loadTasks(){let e=localStorage.getItem("tasks");return e?JSON.parse(e):[]}function createTaskElement(e){let t=document.createElement("li");t.id=`task-${e.id}`,t.classList.add("task");let s=document.createElement("input");s.type="checkbox",s.checked=e.completed,s.addEventListener("change",()=>toggleCompletion(e.id)),t.appendChild(s);let a=document.createElement("p");a.textContent=e.description,e.completed&&a.classList.add("description"),t.appendChild(a);let n=document.createElement("input");n.type="text",n.value=e.description,n.classList.add("edit-input"),n.style.display="none",a.style.display="inline-block",n.addEventListener("keydown",t=>{if("Enter"===t.key){let s=n.value.trim();""!==s?editTask(e.id,s):(alert("Task description cannot be empty."),n.value=e.description)}}),t.appendChild(n);let i=document.createElement("div");return i.classList.add("task-menu"),i.innerHTML=`
    <input class="menu-input" type="checkbox" id="menu-${e.id}" />
    <label class="menu-label" for="menu-${e.id}">•••</label>
    <ul class="menu-list">
      <li onclick="moveTaskUp(${e.id})">Up Task</li>
      <li onclick="editTask(${e.id})">Edit Task</li>
      <li onclick="moveTaskDown(${e.id})">Down Task</li>
      <li onclick="deleteTask(${e.id})">Delete Task</li>
    </ul>
  `,t.appendChild(i),a.addEventListener("dblclick",()=>{a.style.display="none",n.style.display="inline-block",n.focus()}),n.addEventListener("blur",()=>{let t=n.value.trim();""!==t?editTask(e.id,t):(alert("Task description cannot be empty."),n.value=e.description),n.style.display="none",a.style.display="inline-block"}),t}function renderTasks(){let e=document.getElementById("taskList"),t=document.createDocumentFragment();if(0===tasks.length){let s=document.createElement("li");s.classList.add("card"),s.innerHTML=`
      <h2>No Tasks to Display</h2>
      <img src="./assets/img/undraw_to_do_re_jaef.svg" loading="lazy" />
      <p>It looks like your todo list is empty right now.
        Take a moment to relax, or start adding tasks to stay productive!
      </p>
    `,t.appendChild(s)}else tasks.forEach(e=>{let s=createTaskElement(e);t.appendChild(s)});e.innerHTML="",e.appendChild(t)}function updateTaskList(){renderTasks()}function animateTask(e,t){e.classList.add(t),setTimeout(()=>{e.classList.remove(t)},300)}document.addEventListener("DOMContentLoaded",()=>{tasks=loadTasks(),renderTasks()});const taskInputButton=document.getElementById("taskInputButton"),taskForm=document.getElementById("taskForm");taskInputButton.addEventListener("click",()=>{taskForm.style.display="none"===taskForm.style.display?"block":"none",taskForm.style.animation="fadeIn 0.3s ease-in-out",document.getElementById("taskInput").focus()}),taskForm.addEventListener("submit",e=>{e.preventDefault(),taskForm.style.display="none";let t=document.getElementById("taskInput"),s=t.value.trim();""!==s?(addTask(s),t.value=""):alert("Please enter a valid task description.")});const searchInput=document.getElementById("searchInput");let debounceTimeout;searchInput.addEventListener("input",function(){clearTimeout(debounceTimeout),debounceTimeout=setTimeout(()=>{let e=searchInput.value.trim().toLowerCase(),t=tasks.filter(t=>t.description.toLowerCase().includes(e));displayTasks(t)},300)});const searchInputButton=document.getElementById("searchInputButton"),searchForm=document.getElementById("searchForm");function displayTasks(e){let t=document.getElementById("taskList"),s=document.createDocumentFragment();if(0===e.length){let a=document.createElement("li");a.classList.add("card"),a.innerHTML=`
      <h2>No Results Found</h2>
      <img src="./assets/img/undraw_not_found_re_bh2e.svg" loading="lazy"/>
      <p>Oops! It seems like there are no tasks matching your search criteria. But don't worry, you can easily add new tasks to your to-do list or try refining your search to find what you're looking for.</p>
    `,s.appendChild(a)}else e.forEach(e=>{let t=createTaskElement(e);s.appendChild(t)});t.innerHTML="",t.appendChild(s)}searchInputButton.addEventListener("click",()=>{searchForm.style.display="none"===searchForm.style.display?"block":"none",searchForm.style.animation="fadeIn 0.3s ease-in-out",document.getElementById("searchInput").focus()}),searchForm.addEventListener("submit",e=>{e.preventDefault(),searchForm.style.display="none"}),displayTasks(tasks);